## SQL を使いこなそう

---

演算子
----
- 選択列リストへの様々な指定,別名をつける
```
select 列名,  /* 列名 */
       列名 + 100 as 列の別名, /* 計算式 */
       'SQL' /* 固定値 */
from テーブル名
```
  - 列名：列の内容がそのまま出力される
  - 計算式：計算式の評価結果が出力する。asをつけて別名をつける。
  - 固定値：固定値がそのまま出力される


case演算子
----

- case演算子1
```
case 評価する列や式 
  when 値1 then 値1のときに返す値
  (when 値2 then 値2のときに返す値)
  (else デフォルト値)
end
```

- case演算子2
```
case
  when 条件1 then 条件1のときに返す値
  (when 条件2 then 条件2のときに返す値)
  (else デフォルト値)
end
```

関数
----

#### 文字列にまつわる関数
- 文字の長さを得る関数
  - length(文字列を表す関数) => 文字列の長さを表す数値
  - len(文字列を表す関数) => 文字列の長さを表す数値

- 空白を除去する関数
  - trim(文字列を表す列) => 左右から空白を除去した文字列
  - ltrim(文字列を表す列) => 左側の空白を除去した文字列
  - rrim(文字列を表す列) => 右側の空白を除去した文字列
  `char型で自動的に空白が追加されるときに活用できる`

- 文字列を置換する関数
  - replace(置換対象の文字列, 置換前の部分文字列, 置換後の部分文字列) => 置換処理された後の文字列

-文字列の一部分だけ抽出する関数
  - substring(文字列を表す列, 抽出を開始する位置, 抽出する文字の数) => 抽出された部分文字列
  - substr(文字列を表す列, 抽出を開始する位置, 抽出する文字の数) => 抽出された部分文字列
  `substringかsubstrはDBMS製品のよって変わる`

- 文字を連結する関数
  - concat(文字列, 文字列[, 文字列...]) => 連結後の文字列


#### 数値にまつわる関数
- 指定桁で四捨五入する関数
  - round(数値を表す列, 有効とする桁数) => 四捨五入した値

- 指定桁で切り捨てる関数
  - trunc(数値を表す列, 有効とする桁数) => 切り捨てた値

- べき乗を計算する関数
  - power(数値を表す列, 何乗するかを指定する数値) => 数値を指定した回数だけ乗じた結果

#### 日付にまつわる関数
- 現在の日付を得る関数
  - current_date => 現在の日付(YYYY-MM-DD)
  - current_time => 現在の時刻

#### 変換にまつわる関数
- データ型を変換する
  - cast(変換する値 as 変換する型) => 変換後の値

- 最初に登場するnullでない値を返す関数
  coalesce(列や式1, 列や式2, 列や式3...) => 引数のうち、最初に現れたnullでない引数